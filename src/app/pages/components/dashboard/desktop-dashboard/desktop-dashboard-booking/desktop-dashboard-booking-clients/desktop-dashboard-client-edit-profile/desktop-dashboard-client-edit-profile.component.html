<div class="desktop-dashboard-edit-profile">
    <div fxlayout="row" class="main-heading pb-3 border-bottom">
        <h6>Edit Profile</h6>
    </div>

    <form [formGroup]="editProfileClientBookingForm">
        <div fxlayout="row" class="edit-section border-bottom mt-4 pb-3">
            <div fxFlex="25%" class="left-img text-center py-4 px-3 mr-4">

                <div class="left-imgs" *ngIf="preview.length > 0">
                    <ng-container *ngFor="let preview of preview; let i = index">
                        <span
                        (click)="removeImage(i)"
                        class="icon-baseline-close-24px-11 close"
                        ></span>
                        <img class="mr-2 mt-3" [src]="preview.data" />
                    </ng-container>
                </div>

                <!-- <img src="../../../../../../../../assets/img/w2.png">
                <a class="add-btn">
                    <span class="icon-add-button-inside-black-circle-1"></span>
                </a>
                <p class="pt-4">Drag & Drop</p>
                <p class="pt-2 pb-3">Client Profile Photo</p>
                <div class="upload-btn border-top pt-3">
                    <a mat-button class="pink-b outlined rounded-bt d-block">Upload</a>
                </div> -->

                <app-file-upload
                    *ngIf="preview.length == 0"
                    (uploadData)="onFileUpload($event)"
                    template="lg">
                </app-file-upload>

            </div>

            <div fxFlex="35%" class="center-inputs mr-4">
                <div fxLayout="row" class="input-fields">
                    <mat-form-field class="form-section w-100">
                        <mat-label>Client Name</mat-label>
                        <input matInput type="text" formControlName="clientName">
                        <mat-error *ngIf="editProfileClientBookingForm.get('clientName').hasError('required')">
                            Client Name is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
                <div fxLayout="row" class="input-fields">
                    <mat-form-field class="form-section w-100">
                        <mat-label>Client Surname</mat-label>
                        <input matInput type="text" formControlName="clientSurname">
                        <mat-error *ngIf="editProfileClientBookingForm.get('clientSurname').hasError('required')">
                            Client Surname is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="input-fields">
                    <p class="input-heading py-2">Phone Number</p>
                    <div fxLayout="row">
                        <div fxFlex="28%" class="mr-3">
                            <mat-form-field class="form-section w-100">
                                <mat-label>Code</mat-label>
                                <mat-select formControlName="phoneCode" [(ngModel)]="selectedPhoneCode">
                                    <mat-option value="+41">+41</mat-option>
                                </mat-select>
                                <mat-error *ngIf="editProfileClientBookingForm.get('phoneCode').hasError('required')">
                                    Code is <strong>required</strong>
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div fxFlex="65%">
                            <mat-form-field class="form-section w-100">
                                <mat-label>Number</mat-label>
                                <input matInput type="number" formControlName="phoneNumber">
                                <mat-error *ngIf="editProfileClientBookingForm.get('phoneNumber').hasError('required')">
                                    Number is <strong>required</strong>
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <div fxLayout="row" class="input-fields">
                    <mat-form-field class="form-section w-100">
                        <mat-label>Email Address</mat-label>
                        <input matInput type="text" formControlName="email">
                        <mat-error *ngIf="editProfileClientBookingForm.get('email').hasError('required')">
                            Email is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
                <div fxLayout="row" class="input-fields">
                    <div fxFlex="65%" class="mr-3">
                        <mat-form-field class="form-section w-100">
                            <mat-label>Street</mat-label>
                            <input matInput type="text" formControlName="streetName">
                            <mat-error *ngIf="editProfileClientBookingForm.get('streetName').hasError('required')">
                                Street is <strong>required</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxFlex="30%">
                        <mat-form-field class="form-section w-100">
                            <mat-label>Number</mat-label>
                            <input matInput type="number" formControlName="streetNumber">
                            <mat-error *ngIf="editProfileClientBookingForm.get('streetNumber').hasError('required')">
                                Number is <strong>required</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div fxLayout="row" class="input-fields">
                    <div fxFlex="65%" class="mr-3">
                        <mat-form-field class="form-section w-100">
                            <mat-label>City</mat-label>
                            <input matInput type="text" formControlName="city">
                            <mat-error *ngIf="editProfileClientBookingForm.get('city').hasError('required')">
                                City is <strong>required</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxFlex="30%">
                        <mat-form-field class="form-section w-100">
                            <mat-label>Postcode</mat-label>
                            <input matInput type="text" formControlName="postCode">
                            <mat-error *ngIf="editProfileClientBookingForm.get('postCode').hasError('required')">
                                Postcode is <strong>required</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div fxLayout="row" class="input-fields">
                    <mat-form-field class="form-section w-100">
                        <mat-label>Country</mat-label>
                        <mat-select formControlName="country" [(ngModel)]="selectedCountry">
                            <mat-option value="swizerland">Swizerland</mat-option>
                        </mat-select>
                        <mat-error *ngIf="editProfileClientBookingForm.get('country').hasError('required')">
                            Country is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div fxFlex="40%" class="right-input-fields">
                <div fxLayout="row" class="text-area">
                    <mat-form-field class="w-100">
                        <mat-label>Internal Note</mat-label>
                        <textarea matInput type="text" formControlName="internal_note"></textarea>
                        <mat-error *ngIf="editProfileClientBookingForm.get('allergens').hasError('required')">
                            Internal Note is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                    <span class="words">20/50</span>
                </div>
                <div fxLayout="row" class="text-area">
                    <mat-form-field class="w-100">
                        <mat-label>Allergens</mat-label>
                        <textarea matInput type="text" formControlName="allergens"></textarea>
                        <mat-error *ngIf="editProfileClientBookingForm.get('allergens').hasError('required')">
                            Allergens is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                    <span class="words">15/85</span>
                </div>
                <div fxLayout="row">
                    <mat-form-field class="form-section w-100">
                        <mat-label>Birthday</mat-label>
                        <input [max]="today" matInput [matDatepicker]="picker" formControlName="birthday">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error *ngIf="editProfileClientBookingForm.get('birthday').hasError('required')">
                            Birthday is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
                <div fxLayout="row" class="input-fields">
                    <mat-form-field class="form-section w-100">
                        <mat-label>Discount %</mat-label>
                        <input matInput type="number" formControlName="discount">
                        <mat-error *ngIf="editProfileClientBookingForm.get('discount').hasError('required')">
                            Discount % is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
        </div>
    </form>
    
    <div fxLayout="row" class="bottom-btns-bar pt-4">
        <div fxFlex="45%" class="left-side">
            <div fxLayout="row" class="w-100">
                <div fxFlex="50%">
                    <div class="delete">
                        <a (click)="deleteClient()" mat-button class="px-3">
                            <span class="icon-baseline-close-24px-1"></span>
                            Delete User
                        </a>
                    </div>
                </div>

                <div fxFlex="50%">
                    <div class="block float-right">
                        <span class="pr-3">Block User</span>
                        <mat-slide-toggle></mat-slide-toggle>
                    </div>
                </div>
            </div>
        </div>

        <div fxFlex="55%" class="right-side text-right">
            <a mat-button class="white-b rounded-bt px-5 mr-3" (click)="onSelectType('details')">Cancel</a>
            <a mat-button class="pink-b rounded-bt px-5" (click)="updateClient()">Update Changes</a>
        </div>
    </div>
</div>